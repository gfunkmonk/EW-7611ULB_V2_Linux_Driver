From 4553d7f9546e7130c456cfc413ca17577b59f1b1 Mon Sep 17 00:00:00 2001
From: mike_ming <mike_ming@realsil.com.cn>
Date: Mon, 5 Jan 2015 13:44:02 +0800
Subject: [PATCH] autopair failed when restart bt 7-10 times

Signed-off-by: mike_ming <mike_ming@realsil.com.cn>
---
 src/com/android/bluetooth/a2dp/A2dpService.java   | 2 +-
 src/com/android/bluetooth/hfp/HeadsetService.java | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/com/android/bluetooth/a2dp/A2dpService.java b/a2dp/A2dpService.java
index f389244..caac4fb 100755
--- a/src/com/android/bluetooth/a2dp/A2dpService.java
+++ b/src/com/android/bluetooth/a2dp/A2dpService.java
@@ -130,7 +130,7 @@ public class A2dpService extends ProfileService {
             return false;
         }
 
-        mStateMachine.sendMessage(A2dpStateMachine.CONNECT, device);
+        mStateMachine.sendMessageDelayed(A2dpStateMachine.CONNECT, device, 100);
         return true;
     }
 
diff --git a/src/com/android/bluetooth/hfp/HeadsetService.java b/hfp/HeadsetService.java
index ae2954e..556e311 100755
--- a/src/com/android/bluetooth/hfp/HeadsetService.java
+++ b/src/com/android/bluetooth/hfp/HeadsetService.java
@@ -342,7 +342,7 @@ public class HeadsetService extends ProfileService {
             return false;
         }
 
-        mStateMachine.sendMessage(HeadsetStateMachine.CONNECT, device);
+        mStateMachine.sendMessageDelayed(HeadsetStateMachine.CONNECT, device, 100);
         return true;
     }
 
-- 
1.9.1

